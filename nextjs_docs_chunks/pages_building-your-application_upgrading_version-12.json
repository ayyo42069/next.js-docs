[
  {
    "title": "Version 12",
    "section": "Untitled Section",
    "section_id": "untitled-section",
    "heading_level": 3,
    "content": "Menu\n\nUsing App Router\n\nFeatures available in /app\n\nUsing Latest Version\n\n15.2.4\n\n[Building Your Application](/docs/pages/building-your-application)[Upgrading](/docs/pages/building-your-application/upgrading)Version 12",
    "preview": "Menu Using App Router Features available in /app Using Latest Version 15.2.4 [Building Your Application](/docs/pages/building-your-application)[Upgrading](/docs/pages/building-your-application/upgrading)Version 12",
    "url": "https://nextjs.org/docs/pages/building-your-application/upgrading/version-12#untitled-section",
    "position": 0
  },
  {
    "title": "Version 12",
    "section": "Version 12",
    "section_id": "version-12",
    "heading_level": 1,
    "content": "# Version 12\n\nTo upgrade to version 12, run the following command:\n\nTerminal\n\n```\nnpm i next@12 react@17 react-dom@17 eslint-config-next@12\n```\n\nTerminal\n\n```\nyarn add next@12 react@17 react-dom@17 eslint-config-next@12\n```\n\nTerminal\n\n```\npnpm up next@12 react@17 react-dom@17 eslint-config-next@12\n```\n\nTerminal\n\n```\nbun add next@12 react@17 react-dom@17 eslint-config-next@12\n```\n\n> **Good to know:** If you are using TypeScript, ensure you also upgrade `@types/react` and `@types/react-dom` to their corresponding versions.",
    "preview": "To upgrade to version 12, run the following command: Terminal [Code Block] Terminal [Code Block] Terminal [Code Block] Terminal [Code Block] > **Good to know:** If you are using TypeScript, ensure you also upgrade `@types/react` and `@types/react-dom` to their corresponding versions.",
    "url": "https://nextjs.org/docs/pages/building-your-application/upgrading/version-12#version-12",
    "position": 1
  },
  {
    "title": "Version 12",
    "section": "[Upgrading to 12.2](#upgrading-to-122)",
    "section_id": "upgrading-to-12-2-upgrading-to-122",
    "heading_level": 3,
    "content": "### [Upgrading to 12.2](#upgrading-to-122)\n\n[Middleware](/docs/messages/middleware-upgrade-guide) - If you were using Middleware prior to `12.2`, please see the [upgrade guide](/docs/messages/middleware-upgrade-guide) for more information.",
    "preview": "[Middleware](/docs/messages/middleware-upgrade-guide) - If you were using Middleware prior to `12.2`, please see the [upgrade guide](/docs/messages/middleware-upgrade-guide) for more information.",
    "url": "https://nextjs.org/docs/pages/building-your-application/upgrading/version-12#upgrading-to-12-2-upgrading-to-122",
    "position": 2
  },
  {
    "title": "Version 12",
    "section": "[Upgrading to 12.0](#upgrading-to-120)",
    "section_id": "upgrading-to-12-0-upgrading-to-120",
    "heading_level": 3,
    "content": "### [Upgrading to 12.0](#upgrading-to-120)\n\n[Minimum Node.js Version](https://nodejs.org/en/) - The minimum Node.js version has been bumped from `12.0.0` to `12.22.0` which is the first version of Node.js with native ES Modules support.\n\n[Minimum React Version](https://react.dev/learn/add-react-to-an-existing-project) - The minimum required React version is `17.0.2`. To upgrade you can run the following command in the terminal:\n\nTerminal\n\n```\nnpm install react@latest react-dom@latest\n \nyarn add react@latest react-dom@latest\n \npnpm update react@latest react-dom@latest\n \nbun add react@latest react-dom@latest\n```\n\n#### [SWC replacing Babel](#swc-replacing-babel)\n\nNext.js now uses the Rust-based compiler [SWC](https://swc.rs/) to compile JavaScript/TypeScript. This new compiler is up to 17x faster than Babel when compiling individual files and up to 5x faster Fast Refresh.\n\nNext.js provides full backward compatibility with applications that have [custom Babel configuration](/docs/pages/building-your-application/configuring/babel). All transformations that Next.js handles by default like styled-jsx and tree-shaking of `getStaticProps` / `getStaticPaths` / `getServerSideProps` have been ported to Rust.\n\nWhen an application has a custom Babel configuration, Next.js will automatically opt-out of using SWC for compiling JavaScript/Typescript and will fall back to using Babel in the same way that it was used in Next.js 11.\n\nMany of the integrations with external libraries that currently require custom Babel transformations will be ported to Rust-based SWC transforms in the near future. These include but are not limited to:\n\n* Styled Components\n* Emotion\n* Relay\n\nIn order to prioritize transforms that will help you adopt SWC, please provide your `.babelrc` on [this feedback thread](https://github.com/vercel/next.js/discussions/30174).\n\n#### [SWC replacing Terser for minification](#swc-replacing-terser-for-minification)\n\nYou can opt-in to replacing Terser with SWC for minifying JavaScript up to 7x faster using a flag in `next.config.js`:\n\nnext.config.js\n\n```\nmodule.exports = {\n  swcMinify: true,\n}\n```\n\nMinification using SWC is an opt-in flag to ensure it can be tested against more real-world Next.js applications before it becomes the default in Next.js 12.1. If you have feedback about minification, please leave it on [this feedback thread](https://github.com/vercel/next.js/discussions/30237).\n\n#### [Improvements to styled-jsx CSS parsing](#improvements-to-styled-jsx-css-parsing)\n\nOn top of the Rust-based compiler we've implemented a new CSS parser based on the one used for the styled-jsx Babel transform. This new parser has improved handling of CSS and now errors when invalid CSS is used that would previously slip through and cause unexpected behavior.\n\nBecause of this change invalid CSS will throw an error during development and `next build`. This change only affects styled-jsx usage.\n\n#### [`next/image` changed wrapping element](#nextimage-changed-wrapping-element)\n\n`next/image` now renders the `<img>` inside a `<span>` instead of `<div>`.\n\nIf your application has specific CSS targeting span such as `.container span`, upgrading to Next.js 12 might incorrectly match the wrapping element inside the `<Image>` component. You can avoid this by restricting the selector to a specific class such as `.container span.item` and updating the relevant component with that className, such as `<span className=\"item\" />`.\n\nIf your application has specific CSS targeting the `next/image` `<div>` tag, for example `.container div`, it may not match anymore. You can update the selector `.container span`, or preferably, add a new `<div className=\"wrapper\">` wrapping the `<Image>` component and target that instead such as `.container .wrapper`.\n\nThe `className` prop is unchanged and will still be passed to the underlying `<img>` element.\n\nSee the [documentation](/docs/pages/building-your-application/optimizing/images#styling) for more info.\n\n#### [HMR connection now uses a WebSocket](#hmr-connection-now-uses-a-websocket)\n\nPreviously, Next.js used a [server-sent events](https://developer.mozilla.org/docs/Web/API/Server-sent_events) connection to receive HMR events. Next.js 12 now uses a WebSocket connection.\n\nIn some cases when proxying requests to the Next.js dev server, you will need to ensure the upgrade request is handled correctly. For example, in `nginx` you would need to add the following configuration:\n\n```\nlocation /_next/webpack-hmr {\n    proxy_pass http://localhost:3000/_next/webpack-hmr;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n}\n```\n\nIf you are using Apache (2.x), you can add the following configuration to enable web sockets to the server. Review the port, host name and server names.\n\n```\n<VirtualHost *:443>\n # ServerName yourwebsite.local\n ServerName \"${WEBSITE_SERVER_NAME}\"\n ProxyPass / http://localhost:3000/\n ProxyPassReverse / http://localhost:3000/\n # Next.js 12 uses websocket\n <Location /_next/webpack-hmr>\n    RewriteEngine On\n    RewriteCond %{QUERY_STRING} transport=websocket [NC]\n    RewriteCond %{HTTP:Upgrade} websocket [NC]\n    RewriteCond %{HTTP:Connection} upgrade [NC]\n    RewriteRule /(.*) ws://localhost:3000/_next/webpack-hmr/$1 [P,L]\n    ProxyPass ws://localhost:3000/_next/webpack-hmr retry=0 timeout=30\n    ProxyPassReverse ws://localhost:3000/_next/webpack-hmr\n </Location>\n</VirtualHost>\n\n```\n\nFor custom servers, such as `express`, you may need to use `app.all` to ensure the request is passed correctly, for example:\n\n```\napp.all('/_next/webpack-hmr', (req, res) => {\n  nextjsRequestHandler(req, res)\n})\n```\n\n#### [Webpack 4 support has been removed](#webpack-4-support-has-been-removed)\n\nIf you are already using webpack 5 you can skip this section.\n\nNext.js has adopted webpack 5 as the default for compilation in Next.js 11. As communicated in the [webpack 5 upgrading documentation](/docs/messages/webpack5) Next.js 12 removes support for webpack 4.\n\nIf your application is still using webpack 4 using the opt-out flag, you will now see an error linking to the [webpack 5 upgrading documentation](/docs/messages/webpack5).\n\n#### [`target` option deprecated](#target-option-deprecated)\n\nIf you do not have `target` in `next.config.js` you can skip this section.\n\nThe target option has been deprecated in favor of built-in support for tracing what dependencies are needed to run a page.\n\nDuring `next build`, Next.js will automatically trace each page and its dependencies to determine all of the files that are needed for deploying a production version of your application.\n\nIf you are currently using the `target` option set to `serverless`, please read the [documentation on how to leverage the new output](/docs/pages/api-reference/config/next-config-js/output).\n\nWas this helpful?\n\nsupported.\n\nSend",
    "preview": "[Minimum Node.js Version](https://nodejs.org/en/) - The minimum Node.js version has been bumped from `12.0.0` to `12.22.0` which is the first version of Node.js with native ES Modules support. [Minimum React Version](https://react.dev/learn/add-react-to-an-existing-project) - The minimum required R",
    "url": "https://nextjs.org/docs/pages/building-your-application/upgrading/version-12#upgrading-to-12-0-upgrading-to-120",
    "position": 3
  }
]